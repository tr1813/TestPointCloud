<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Potree Viewer</title>

	<link rel="stylesheet" type="text/css" href="./libs/potree/potree.css">
	<link rel="stylesheet" type="text/css" href="./libs/jquery-ui/jquery-ui.min.css">
	<link rel="stylesheet" type="text/css" href="./libs/openlayers3/ol.css">
	<link rel="stylesheet" type="text/css" href="./libs/spectrum/spectrum.css">
	<link rel="stylesheet" type="text/css" href="./libs/jstree/themes/mixed/style.css">
</head>

<body>
	<script src="./libs/jquery/jquery-3.1.1.min.js"></script>
	<script src="./libs/spectrum/spectrum.js"></script>
	<script src="./libs/jquery-ui/jquery-ui.min.js"></script>
	<script src="./libs/three.js/build/three.min.js"></script>
	<script src="./libs/three.js/extra/lines.js"></script>
	<script src="./libs/other/BinaryHeap.js"></script>
	<script src="./libs/tween/tween.min.js"></script>
	<script src="./libs/d3/d3.js"></script>
	<script src="./libs/proj4/proj4.js"></script>
	<script src="./libs/openlayers3/ol.js"></script>
	<script src="./libs/i18next/i18next.js"></script>
	<script src="./libs/jstree/jstree.js"></script>
	<script src="./libs/potree/potree.js"></script>
	<script src="./libs/plasio/js/laslaz.js"></script>
	
	<!-- INCLUDE ADDITIONAL DEPENDENCIES HERE -->
		document.title = "";
		viewer.setEDLEnabled(false);
		viewer.setBackground("gradient"); // ["skybox", "gradient", "black", "white"];
		viewer.setDescription(``);
	
	<div class="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
		<div id="potree_render_area" style="background-image: url('./libs/potree/resources/images/background.jpg');"></div>
		<div id="potree_sidebar_container"> </div>
	</div>
	
	<script>
		
		window.viewer = new Potree.Viewer(document.getElementById("potree_render_area"));
		
		viewer.setEDLEnabled(true);
		viewer.setFOV(60);
		viewer.setPointBudget(2_000_000);
		document.title = "Lapis Lazuli";
		viewer.setEDLEnabled(false);
		viewer.setBackground("black"); // ["skybox", "gradient", "black", "white"];
		viewer.setDescription(``);
		viewer.loadSettingsFromURL();
		
		viewer.setDescription("Un nuage de points de Lapis Lazuli (403007)");
		
		viewer.loadGUI(() => {
			viewer.setLanguage('en');
			$("#menu_appearance").next().show();
			$("#menu_tools").next().show();
			$("#menu_clipping").next().show();
			viewer.toggleSidebar();
		});
		let scene = viewer.scene;
		
		Potree.loadPointCloud("pointclouds/LapisLazuli.html/cloud.js", "LapisLazuli.html", e => {
			let pointcloud = e.pointcloud;
			let material = pointcloud.material;
			viewer.scene.addPointCloud(pointcloud);
			material.activeAttributeName = "rgba"; //[rgba, intensity, classification, ...]
			material.size = 1;
			material.pointSizeType = Potree.PointSizeType.FIXED;
			material.shape = Potree.PointShape.CIRCLE;
			viewer.fitToScreen();
		
		
			viewer.scene.addPointCloud(pointcloud);

			viewer.scene.addAnnotation([ 
			-216780.5328607195,
			872861.1047477507,
			13033.506038238365], {
			"title":"Puits de lumière",
			"description":`Une <i>bédière</i> ou canyon de surface conduit l'eau de ruissellement et de fonte dans la grotte de glace.`,
			"cameraPosition": [
			-216782.399, 872864.389, 13030.284,],
			"cameraTarget": [
			-216786.515, 872846.700, 13030.887,]


		});


		viewer.scene.addAnnotation([ 
			-216802.32302959473,
			872819.4914791288,
			13029.131632233079,], {
			"title":"Entrée",
			"description":`L'entrée principale de la grotte se trouve côté sud, en bordure du glacier HPS-31 (<i>Hiélo Patagonico Sur</i>)`
		});


		viewer.scene.addAnnotation([ 
		-216793.43869256973,
				872848.2331904173,
				13029.882616400719,], {
			"title":"Cible",
			"description":`Les cibles photogrammétriques permettent de géoréférencer le nuage de points.`,
			"cameraPosition": [
			-216795.967, 
			872848.505, 
			13030.306,],
			"cameraTarget": [
			-216791.387, 
			872847.945, 
			13029.603,]
		});
		
		});




	</script>
	
	
  </body>
</html>
